{"remainingRequest":"E:\\甘润\\技术监督\\supervise\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\甘润\\技术监督\\supervise\\src\\components\\scene-first.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\甘润\\技术监督\\supervise\\src\\components\\scene-first.vue","mtime":1623847480833},{"path":"E:\\甘润\\技术监督\\supervise\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1623122841293},{"path":"E:\\甘润\\技术监督\\supervise\\node_modules\\babel-loader\\lib\\index.js","mtime":1623122859414},{"path":"E:\\甘润\\技术监督\\supervise\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1623122841293},{"path":"E:\\甘润\\技术监督\\supervise\\node_modules\\vue-loader\\lib\\index.js","mtime":1623122856888}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tchBtn: false,\n\t\t\tsF_ModalTitle: '',\n\t\t\texpertList: [{\n\t\t\t\tlabel: '吴天源',\n\t\t\t\tvalue: '0'\n\t\t\t}],\n\t\t\ttableLoadding: false,\n\t\t\tpageData: {\n\t\t\t\tpageNow: 1,\n\t\t\t\tpageSize: 10,\n\t\t\t\ttotalNum: 100\n\t\t\t},\n\t\t\texpert: [{\n\t\t\t\tname: '张三',\n\t\t\t\tmajor: 'XXXX专业',\n\t\t\t\tid: '1'\n\t\t\t}, {\n\t\t\t\tname: '李四',\n\t\t\t\tmajor: 'XXXX专业',\n\t\t\t\tid: '2'\n\t\t\t}, {\n\t\t\t\tname: '王五',\n\t\t\t\tmajor: 'XXXX专业',\n\t\t\t\tid: '3'\n\t\t\t}],\n\t\t\tsF_Modal: false,\n\t\t\tsF_ScreenData: {\n\t\t\t\tkv: '',\n\t\t\t\tkeyWord: '',\n\t\t\t\tstartDate: '',\n\t\t\t\toverDate: ''\n\t\t\t},\n\t\t\tsF_FromData: {\n\t\t\t\tgcmc: '',\n\t\t\t\tupdateTime: '',\n\t\t\t\tyxdw: '',\n\t\t\t\tjgdw: '',\n\t\t\t\tsjdw: '',\n\t\t\t\tsgdw: '',\n\t\t\t\tgldw: '',\n\t\t\t\twzgydw: ''\n\t\t\t},\n\t\t\tsF_FromRule: {\n\t\t\t\tgcmc: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入项目名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tupdateTime: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\ttype: 'date',\n\t\t\t\t\tmessage: '请选择任务督察时间',\n\t\t\t\t\ttrigger: 'change'\n\t\t\t\t}],\n\t\t\t\tyxdw: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入运行单位名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tjgdw: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入建管单位名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tsjdw: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入设计单位名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tgldw: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入管理单位名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tsgdw: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入施工单位名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\twzgydw: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入物资供应单位名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t},\n\t\t\tsF_TableHeard: [{\n\t\t\t\t\ttitle: '请选择',\n\t\t\t\t\talign: 'center',\n\t\t\t\t\tkey: 'checkBox',\n\t\t\t\t\twidth: 80,\n\t\t\t\t\trender: (h, params) => {\n\t\t\t\t\t\tvar _this = this;\n\t\t\t\t\t\treturn h('div', [\n\t\t\t\t\t\t\th('Checkbox', {\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tvalue: params.row.checkBox\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t'on-change': (e) => {\n\t\t\t\t\t\t\t\t\t\tif (e == false) {\n\t\t\t\t\t\t\t\t\t\t\t_this.disabled = true\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t_this.sF_TableData.forEach((items) => {\n\t\t\t\t\t\t\t\t\t\t\t_this.$set(items, 'checkBox', false)\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t_this.sF_TableData[params.index].checkBox = e;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t])\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\ttype: 'index',\n\t\t\t\t\twidth: 60,\n\t\t\t\t\talign: 'center'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '任务名称',\n\t\t\t\t\tkey: 'gcmc',\n\t\t\t\t\twidth: 200,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '督查时间',\n\t\t\t\t\tkey: 'updateTime'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '任务状态',\n\t\t\t\t\tslot: 'rwState',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '专家名单',\n\t\t\t\t\tkey: 'userName'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '运行单位',\n\t\t\t\t\tkey: 'yxdw'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '建管单位',\n\t\t\t\t\tkey: 'jgdw'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '设计单位',\n\t\t\t\t\tkey: 'sjdw'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '施工单位',\n\t\t\t\t\tkey: 'sgdw'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '管理单位',\n\t\t\t\t\tkey: 'gldw'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: '物资供应单位',\n\t\t\t\t\tkey: 'wzgydw'\n\t\t\t\t}\n\t\t\t],\n\t\t\tsF_TableData: []\n\t\t}\n\n\t},\n\tmethods: {\n\t\ttablePageChange(e){\n\t\t\tthis.pageData.pageNow = e;\n\t\t\tthis.sD_getTableData();\n\t\t},\n\t\t// 查询督查table\n\t\tsF_FindTable() {\n\t\t\tthis.pageData.pageNow = 1;\n\t\t\tthis.sF_getTableData();\n\t\t},\n\t\t// 筛选清空\n\t\tsF_ScreenReset(name){\n\t\t\tthis.$refs[name].resetFields();\n\t\t},\n\t\tsF_getTableData() {\n\t\t\tthis.tableLoadding = true;\n\t\t\tlet getParam = {\n\t\t\t\tstartTime: this.sF_ScreenData.startDate,\n\t\t\t\tendTime: this.sF_ScreenData.overDate,\n\t\t\t\tdydj: this.sF_ScreenData.kv,\n\t\t\t\tname: this.sF_ScreenData.keyWord,\n\t\t\t\tpage: this.pageData.pageNow,\n\t\t\t\trows: 10,\n\t\t\t};\n\t\t\tthis.$get('getGcRws', getParam)\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res.code != '200') {\n\t\t\t\t\t\tthis.tableLoadding = false;\n\t\t\t\t\t\tthis.errMsg(res.message);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.sF_TableData = res.data.rows;\n\t\t\t\t\t\tthis.pageData.totalNum = res.data.total;\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.tableLoadding = false;\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\t\n\t\t// 新建任务\n\t\tsF_TableAdd() {\n\t\t\tthis.sF_ModalTitle = '新建';\n\t\t\tthis.sF_FromData = {\n\t\t\t\tgcmc: '',\n\t\t\t\tupdateTime: '',\n\t\t\t\tyxdw: '',\n\t\t\t\tjgdw: '',\n\t\t\t\tsjdw: '',\n\t\t\t\tsgdw: '',\n\t\t\t\tgldw: '',\n\t\t\t\twzgydw: ''\n\t\t\t};\n\t\t\tthis.expertList = [];\n\t\t\tthis.sF_Modal = true;\n\t\t},\n\t\t// 编辑任务\n\t\tsF_TableAction(type) {\n\t\t\tlet sTD = this.sF_TableData;\n\t\t\tvar c;\n\t\t\tfor (var i = 0; i < sTD.length; i++) {\n\t\t\t\tif (sTD[i].checkBox) {\n\t\t\t\t\tc = sTD[i]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (c == undefined) {\n\t\t\t\tthis.errMsg('请先选择项目')\n\t\t\t} else {\n\t\t\t\tif (type == 'edit') {\n\t\t\t\t\tthis.sF_FromData = c;\n\t\t\t\t\tif (c.rwState == 1) {\n\t\t\t\t\t\tthis.chBtn = true;\n\t\t\t\t\t}\n\t\t\t\t\tvar stringResult = c.userName.split('、');\n\t\t\t\t\tlet f = []\n\t\t\t\t\tfor (var i = 0; i < stringResult.length; i++) {\n\t\t\t\t\t\tlet n = {\n\t\t\t\t\t\t\tlabel: stringResult[i],\n\t\t\t\t\t\t\tvalue: i\n\t\t\t\t\t\t}\n\t\t\t\t\t\tf.push(n)\n\t\t\t\t\t}\n\t\t\t\t\tthis.expertList = f;\n\t\t\t\t\tthis.sF_ModalTitle = '编辑';\n\t\t\t\t\tthis.sF_Modal = true;\n\t\t\t\t} else if (type == 'del') {\n\t\t\t\t\tthis.$Modal.confirm({\n\t\t\t\t\t\ttitle: '删除',\n\t\t\t\t\t\tcontent: '删除后不可恢复，是否确定删除？',\n\t\t\t\t\t\tonOk: () => {\n\t\t\t\t\t\t\tthis.$Message.info('删除成功');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\tthis.$Message.info('取消删除');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (type == 'word') {\n\t\t\t\t\tconst msg = this.$Message.loading({\n\t\t\t\t\t\tcontent: '报告生成中...',\n\t\t\t\t\t\tduration: 0\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(msg, 3000);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\t\t// 选择专家\n\t\t// value(专家item)\n\t\tchangeExpert(value) {\n\t\t\tthis.expertList.push(value)\n\t\t},\n\t\t// 标签删除\n\t\t// name（标签名称）\n\t\ttagClose(event, name) {\n\t\t\tconst index = this.expertList.indexOf(name);\n\t\t\tthis.expertList.splice(index, 1);\n\t\t},\n\t\t// 任务保存\n\t\tsF_FromSave() {\n\t\t\tthis.successMsg('保存成功!')\n\t\t\tthis.sF_Modal = false;\n\t\t\t// console.log(this.sF_FromData)\n\t\t},\n\t\t// 任务提交\n\t\t// fromName（表单ref）\n\t\tsF_FromSub(fromName) {\n\t\t\tvar _this = this;\n\t\t\t_this.$refs[fromName].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tvar addData = _this.sF_FromData;\n\t\t\t\t\t_this.$post('addGcRw', addData)\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tif (res.code != 200) {\n\t\t\t\t\t\t\t\t_this.$Message.error(res.message);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_this.successMsg('保存成功!');\n\t\t\t\t\t\t\t\t_this.sF_Modal = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t_this.errMsg('必填项不可为空!')\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 成功消息提示\n\t\t// title（提示文字）\n\t\tsuccessMsg(title) {\n\t\t\tthis.$Message.success(title)\n\t\t},\n\t\t// 失败消息提示\n\t\t// err（提示文字）\n\t\terrMsg(err) {\n\t\t\tthis.$Message.error(err)\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.sF_getTableData()\n\t}\n}\n",{"version":3,"sources":["scene-first.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scene-first.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div class=\"sceneFirst\">\r\n\t\t<div class=\"sceneFirstScreen\">\r\n\t\t\t<div>条件筛选:</div>\r\n\t\t\t<div class=\"sceneFirstScreenInner\">\r\n\t\t\t\t<Form :model=\"sF_ScreenData\" label-position=\"right\" :label-width=\"100\" inline ref=\"sF_ScreenData\">\r\n\t\t\t\t\t<FormItem label=\"起止时间:\">\r\n\t\t\t\t\t\t<DatePicker type=\"date\" placeholder=\"起始时间\" v-model=\"sF_ScreenData.startDate\" format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\t@on-change=\"sF_ScreenData.startDate=$event\" />\r\n\t\t\t\t\t\t<span class=\"screenLine\">-</span>\r\n\t\t\t\t\t\t<DatePicker type=\"date\" placeholder=\"结束时间\" v-model=\"sF_ScreenData.overDate\" format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\t@on-change=\"sF_ScreenData.overDate=$event\" />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem label=\"电压等级:\">\r\n\t\t\t\t\t\t<Select v-model=\"sF_ScreenData.kv\" placeholder=\"选择电压等级\" style=\"width: 200px;\">\r\n\t\t\t\t\t\t\t<Option value=\"500kV\">500kV</Option>\r\n\t\t\t\t\t\t\t<Option value=\"880kV\">880kV</Option>\r\n\t\t\t\t\t\t\t<Option value=\"1000kV\">1000kV</Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem label=\"关键词:\">\r\n\t\t\t\t\t\t<Input v-model=\"sF_ScreenData.keyWord\" placeholder=\"搜索关键字\"></Input>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem :label-width=\"0\">\r\n\t\t\t\t\t\t<Button type=\"primary\" icon=\"ios-search\" @click=\"sF_FindTable\">查询</Button>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem :label-width=\"0\">\r\n\t\t\t\t\t\t<Button type=\"primary\" icon=\"ios-sync\" ghost @click=\"sF_ScreenReset('sF_ScreenData')\">重置</Button>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"sceneFirstTable\">\r\n\t\t\t<div class=\"sceneFirstTableBtn\">\r\n\t\t\t\t<Button type=\"primary\" custom-icon=\"iconfont icon-xinzeng\" @click=\"sF_TableAdd\">新建任务</Button>\r\n\t\t\t\t<Button type=\"primary\" icon=\"ios-create-outline\" @click=\"sF_TableAction('edit')\">编辑</Button>\r\n\t\t\t\t<Button type=\"warning\" custom-icon=\"iconfont icon-shanchu\" @click=\"sF_TableAction('del')\">删除</Button>\r\n\t\t\t\t<Button type=\"primary\" custom-icon=\"iconfont icon-baogao\" @click=\"sF_TableAction('word')\">生成报告</Button>\r\n\t\t\t</div>\r\n\t\t\t<Table ref=\"sF_Table\" :columns=\"sF_TableHeard\" :data=\"sF_TableData\" stripe :loading=\"tableLoadding\">\r\n\t\t\t\t<template slot-scope=\"{ row, index }\" slot=\"rwState\">\r\n\t\t\t\t\t<span v-if=\"row.d10=='1'\" style=\"color:#4b85fa\">已发布</span>\r\n\t\t\t\t\t<span v-else style=\"color: #dbdbdb;\">待发布</span>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template slot-scope=\"{ row, index }\" slot=\"action\">\r\n\t\t\t\t\t<Button type=\"error\" size=\"small\">预(告)警单</Button>\r\n\t\t\t\t</template>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t\t<div class=\"sceneFirstPage\">\r\n\t\t\t<Page :total=\"pageData.totalNum\" :page-size=\"10\" show-elevator show-total @on-change=\"tablePageChange\"/>\r\n\t\t</div>\r\n\t\t<Modal v-model=\"sF_Modal\">\r\n\t\t\t<p slot=\"header\" style=\"color:#4b85fa;background: #f5f7fa;\">\r\n\t\t\t\t<span>{{sF_ModalTitle}}</span>\r\n\t\t\t</p>\r\n\t\t\t<Form ref=\"sF_FromData\" label-position=\"top\" :model=\"sF_FromData\" :rules=\"sF_FromRule\">\r\n\t\t\t\t<FormItem label=\"任务名称:\" prop=\"gcmc\">\r\n\t\t\t\t\t<Input v-model=\"sF_FromData.gcmc\" placeholder=\"请输入项目名称\"></Input>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem label=\"督查时间:\" prop=\"updateTime\">\r\n\t\t\t\t\t<DatePicker type=\"date\" placeholder=\"请选择督查时间\" style=\"width: 100%;\" v-model=\"sF_FromData.updateTime\" format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\t@on-change=\"sF_FromData.updateTime=$event\">\r\n\t\t\t\t\t</DatePicker>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem label=\"专家名单:\">\r\n\t\t\t\t\t<Select placeholder=\"请选择督查专家\" @on-change=\"changeExpert\" label-in-value>\r\n\t\t\t\t\t\t<Option v-for=\"item in expert\" :value=\"item.id\" :label=\"item.name\" :key=\"item.id\">\r\n\t\t\t\t\t\t\t<span>{{item.name}}</span>\r\n\t\t\t\t\t\t\t<span style=\"float:right;color:#ccc\">{{item.major}}</span>\r\n\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<div class=\"addFromExpert\">\r\n\t\t\t\t\t<Tag v-for=\"i in expertList\" :key=\"i.value\" :name=\"i.label\" closable @on-close=\"tagClose\">\r\n\t\t\t\t\t\t{{ i.label }}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Row :gutter=\"16\">\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem label=\"运行单位:\" prop=\"yxdw\">\r\n\t\t\t\t\t\t<Input v-model=\"sF_FromData.yxdw\" placeholder=\"请填写\"></Input>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem label=\"建管单位:\" prop=\"jgdw\">\r\n\t\t\t\t\t\t<Input v-model=\"sF_FromData.jgdw\" placeholder=\"请填写\"></Input>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem label=\"设计单位:\" prop=\"sjdw\">\r\n\t\t\t\t\t\t<Input v-model=\"sF_FromData.sjdw\" placeholder=\"请填写\"></Input>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem label=\"施工单位:\" prop=\"sgdw\">\r\n\t\t\t\t\t\t<Input v-model=\"sF_FromData.sgdw\" placeholder=\"请填写\"></Input>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem label=\"管理单位:\" prop=\"gldw\">\r\n\t\t\t\t\t\t<Input v-model=\"sF_FromData.gldw\" placeholder=\"请填写\"></Input>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem label=\"物资供应单位:\" prop=\"wzgydw\">\r\n\t\t\t\t\t\t<Input v-model=\"sF_FromData.wzgydw\" placeholder=\"请填写\"></Input>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Form>\r\n\t\t\t<div slot=\"footer\" style=\"text-align: center;\">\r\n\t\t\t\t<Button type=\"primary\" ghost custom-icon=\"iconfont icon-166991\" @click=\"sF_FromSave\">保存</Button>\r\n\t\t\t\t<Button type=\"primary\" icon=\"ios-paper-plane-outline\" @click=\"sF_FromSub('sF_FromData')\">发布</Button>\r\n\t\t\t\t<Button custom-icon=\"iconfont icon-chehui\" v-if=\"chBtn\">撤回</Button>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tchBtn: false,\r\n\t\t\t\tsF_ModalTitle: '',\r\n\t\t\t\texpertList: [{\r\n\t\t\t\t\tlabel: '吴天源',\r\n\t\t\t\t\tvalue: '0'\r\n\t\t\t\t}],\r\n\t\t\t\ttableLoadding: false,\r\n\t\t\t\tpageData: {\r\n\t\t\t\t\tpageNow: 1,\r\n\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\ttotalNum: 100\r\n\t\t\t\t},\r\n\t\t\t\texpert: [{\r\n\t\t\t\t\tname: '张三',\r\n\t\t\t\t\tmajor: 'XXXX专业',\r\n\t\t\t\t\tid: '1'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: '李四',\r\n\t\t\t\t\tmajor: 'XXXX专业',\r\n\t\t\t\t\tid: '2'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: '王五',\r\n\t\t\t\t\tmajor: 'XXXX专业',\r\n\t\t\t\t\tid: '3'\r\n\t\t\t\t}],\r\n\t\t\t\tsF_Modal: false,\r\n\t\t\t\tsF_ScreenData: {\r\n\t\t\t\t\tkv: '',\r\n\t\t\t\t\tkeyWord: '',\r\n\t\t\t\t\tstartDate: '',\r\n\t\t\t\t\toverDate: ''\r\n\t\t\t\t},\r\n\t\t\t\tsF_FromData: {\r\n\t\t\t\t\tgcmc: '',\r\n\t\t\t\t\tupdateTime: '',\r\n\t\t\t\t\tyxdw: '',\r\n\t\t\t\t\tjgdw: '',\r\n\t\t\t\t\tsjdw: '',\r\n\t\t\t\t\tsgdw: '',\r\n\t\t\t\t\tgldw: '',\r\n\t\t\t\t\twzgydw: ''\r\n\t\t\t\t},\r\n\t\t\t\tsF_FromRule: {\r\n\t\t\t\t\tgcmc: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入项目名称',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tupdateTime: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\ttype: 'date',\r\n\t\t\t\t\t\tmessage: '请选择任务督察时间',\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tyxdw: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入运行单位名称',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tjgdw: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入建管单位名称',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tsjdw: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入设计单位名称',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tgldw: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入管理单位名称',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tsgdw: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入施工单位名称',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\twzgydw: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请输入物资供应单位名称',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tsF_TableHeard: [{\r\n\t\t\t\t\t\ttitle: '请选择',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t\tkey: 'checkBox',\r\n\t\t\t\t\t\twidth: 80,\r\n\t\t\t\t\t\trender: (h, params) => {\r\n\t\t\t\t\t\t\tvar _this = this;\r\n\t\t\t\t\t\t\treturn h('div', [\r\n\t\t\t\t\t\t\t\th('Checkbox', {\r\n\t\t\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\t\t\tvalue: params.row.checkBox\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ton: {\r\n\t\t\t\t\t\t\t\t\t\t'on-change': (e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (e == false) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t_this.disabled = true\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t_this.sF_TableData.forEach((items) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t_this.$set(items, 'checkBox', false)\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t_this.sF_TableData[params.index].checkBox = e;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttype: 'index',\r\n\t\t\t\t\t\twidth: 60,\r\n\t\t\t\t\t\talign: 'center'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '任务名称',\r\n\t\t\t\t\t\tkey: 'gcmc',\r\n\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '督查时间',\r\n\t\t\t\t\t\tkey: 'updateTime'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '任务状态',\r\n\t\t\t\t\t\tslot: 'rwState',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '专家名单',\r\n\t\t\t\t\t\tkey: 'userName'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '运行单位',\r\n\t\t\t\t\t\tkey: 'yxdw'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '建管单位',\r\n\t\t\t\t\t\tkey: 'jgdw'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '设计单位',\r\n\t\t\t\t\t\tkey: 'sjdw'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '施工单位',\r\n\t\t\t\t\t\tkey: 'sgdw'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '管理单位',\r\n\t\t\t\t\t\tkey: 'gldw'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '物资供应单位',\r\n\t\t\t\t\t\tkey: 'wzgydw'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tsF_TableData: []\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttablePageChange(e){\r\n\t\t\t\tthis.pageData.pageNow = e;\r\n\t\t\t\tthis.sD_getTableData();\r\n\t\t\t},\r\n\t\t\t// 查询督查table\r\n\t\t\tsF_FindTable() {\r\n\t\t\t\tthis.pageData.pageNow = 1;\r\n\t\t\t\tthis.sF_getTableData();\r\n\t\t\t},\r\n\t\t\t// 筛选清空\r\n\t\t\tsF_ScreenReset(name){\r\n\t\t\t\tthis.$refs[name].resetFields();\r\n\t\t\t},\r\n\t\t\tsF_getTableData() {\r\n\t\t\t\tthis.tableLoadding = true;\r\n\t\t\t\tlet getParam = {\r\n\t\t\t\t\tstartTime: this.sF_ScreenData.startDate,\r\n\t\t\t\t\tendTime: this.sF_ScreenData.overDate,\r\n\t\t\t\t\tdydj: this.sF_ScreenData.kv,\r\n\t\t\t\t\tname: this.sF_ScreenData.keyWord,\r\n\t\t\t\t\tpage: this.pageData.pageNow,\r\n\t\t\t\t\trows: 10,\r\n\t\t\t\t};\r\n\t\t\t\tthis.$get('getGcRws', getParam)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tif (res.code != '200') {\r\n\t\t\t\t\t\t\tthis.tableLoadding = false;\r\n\t\t\t\t\t\t\tthis.errMsg(res.message);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.sF_TableData = res.data.rows;\r\n\t\t\t\t\t\t\tthis.pageData.totalNum = res.data.total;\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.tableLoadding = false;\r\n\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 新建任务\r\n\t\t\tsF_TableAdd() {\r\n\t\t\t\tthis.sF_ModalTitle = '新建';\r\n\t\t\t\tthis.sF_FromData = {\r\n\t\t\t\t\tgcmc: '',\r\n\t\t\t\t\tupdateTime: '',\r\n\t\t\t\t\tyxdw: '',\r\n\t\t\t\t\tjgdw: '',\r\n\t\t\t\t\tsjdw: '',\r\n\t\t\t\t\tsgdw: '',\r\n\t\t\t\t\tgldw: '',\r\n\t\t\t\t\twzgydw: ''\r\n\t\t\t\t};\r\n\t\t\t\tthis.expertList = [];\r\n\t\t\t\tthis.sF_Modal = true;\r\n\t\t\t},\r\n\t\t\t// 编辑任务\r\n\t\t\tsF_TableAction(type) {\r\n\t\t\t\tlet sTD = this.sF_TableData;\r\n\t\t\t\tvar c;\r\n\t\t\t\tfor (var i = 0; i < sTD.length; i++) {\r\n\t\t\t\t\tif (sTD[i].checkBox) {\r\n\t\t\t\t\t\tc = sTD[i]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (c == undefined) {\r\n\t\t\t\t\tthis.errMsg('请先选择项目')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (type == 'edit') {\r\n\t\t\t\t\t\tthis.sF_FromData = c;\r\n\t\t\t\t\t\tif (c.rwState == 1) {\r\n\t\t\t\t\t\t\tthis.chBtn = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar stringResult = c.userName.split('、');\r\n\t\t\t\t\t\tlet f = []\r\n\t\t\t\t\t\tfor (var i = 0; i < stringResult.length; i++) {\r\n\t\t\t\t\t\t\tlet n = {\r\n\t\t\t\t\t\t\t\tlabel: stringResult[i],\r\n\t\t\t\t\t\t\t\tvalue: i\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tf.push(n)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.expertList = f;\r\n\t\t\t\t\t\tthis.sF_ModalTitle = '编辑';\r\n\t\t\t\t\t\tthis.sF_Modal = true;\r\n\t\t\t\t\t} else if (type == 'del') {\r\n\t\t\t\t\t\tthis.$Modal.confirm({\r\n\t\t\t\t\t\t\ttitle: '删除',\r\n\t\t\t\t\t\t\tcontent: '删除后不可恢复，是否确定删除？',\r\n\t\t\t\t\t\t\tonOk: () => {\r\n\t\t\t\t\t\t\t\tthis.$Message.info('删除成功');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonCancel: () => {\r\n\t\t\t\t\t\t\t\tthis.$Message.info('取消删除');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (type == 'word') {\r\n\t\t\t\t\t\tconst msg = this.$Message.loading({\r\n\t\t\t\t\t\t\tcontent: '报告生成中...',\r\n\t\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(msg, 3000);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t// 选择专家\r\n\t\t\t// value(专家item)\r\n\t\t\tchangeExpert(value) {\r\n\t\t\t\tthis.expertList.push(value)\r\n\t\t\t},\r\n\t\t\t// 标签删除\r\n\t\t\t// name（标签名称）\r\n\t\t\ttagClose(event, name) {\r\n\t\t\t\tconst index = this.expertList.indexOf(name);\r\n\t\t\t\tthis.expertList.splice(index, 1);\r\n\t\t\t},\r\n\t\t\t// 任务保存\r\n\t\t\tsF_FromSave() {\r\n\t\t\t\tthis.successMsg('保存成功!')\r\n\t\t\t\tthis.sF_Modal = false;\r\n\t\t\t\t// console.log(this.sF_FromData)\r\n\t\t\t},\r\n\t\t\t// 任务提交\r\n\t\t\t// fromName（表单ref）\r\n\t\t\tsF_FromSub(fromName) {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\t_this.$refs[fromName].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tvar addData = _this.sF_FromData;\r\n\t\t\t\t\t\t_this.$post('addGcRw', addData)\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tif (res.code != 200) {\r\n\t\t\t\t\t\t\t\t\t_this.$Message.error(res.message);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t_this.successMsg('保存成功!');\r\n\t\t\t\t\t\t\t\t\t_this.sF_Modal = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_this.errMsg('必填项不可为空!')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 成功消息提示\r\n\t\t\t// title（提示文字）\r\n\t\t\tsuccessMsg(title) {\r\n\t\t\t\tthis.$Message.success(title)\r\n\t\t\t},\r\n\t\t\t// 失败消息提示\r\n\t\t\t// err（提示文字）\r\n\t\t\terrMsg(err) {\r\n\t\t\t\tthis.$Message.error(err)\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.sF_getTableData()\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.screenLine {\r\n\t\tmargin-left: 10px;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t.sceneFirstScreenInner {\r\n\t\tbackground-color: #fafafa;\r\n\t\tborder: 1px solid #dce0e6;\r\n\t}\r\n\r\n\t.sceneFirstScreenInner .ivu-form-item {\r\n\t\tmargin-top: 15px;\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\r\n\t.sceneFirstTable {\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\r\n\t.sceneFirstTableBtn {\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\r\n\t.sceneFirstTableBtn button {\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t.sceneFirstPage {\r\n\t\tmargin-top: 50px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.addFromExpert {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 60px;\r\n\t\tborder: 1px solid #dbdbdb;\r\n\t\tpadding: 5px;\r\n\t\tmargin-bottom: 16px;\r\n\t}\r\n</style>\n"]}]}